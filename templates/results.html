{% extends "layout.html" %}
{% from "utils.html" import info, mutation_card, result_card, card %}

{% set active_page = '' %}

{% block central_content %}

    <div class="card-risk-factors seq" style="margin: 4% auto auto auto;">
    <h3> The characteristics of your sample:</h3>
        {{  result_card(attributes.get('ttype').get('type') + '2.svg', attributes.get('ttype').get('name'))}}

        {{  result_card(attributes.get('ttype').get('type') + '/riskFactor1_' + attributes.get('riskFactor1').get('type') + '.svg',
                        attributes.get('riskFactor1').get('name'),
                        attributes.get('riskFactor1').get('description'))  }}
        {{  result_card(attributes.get('ttype').get('type') + '/riskFactor2_' + attributes.get('riskFactor2').get('type') + '.svg',
                        attributes.get('riskFactor2').get('name'),
                        attributes.get('riskFactor2').get('description'))   }}
        {{  result_card(attributes.get('ttype').get('type') + '/riskFactor3_' + attributes.get('riskFactor3').get('type') + '.svg',
                        attributes.get('riskFactor3').get('name'),
                        attributes.get('riskFactor3').get('description'))   }}
    </div>

<div class="seq">
    <div id="start">
        <button class="results-button" onclick="show_sequencer()">Start DNA <br> sequencing</button>
    </div>


    <div id="step1">
    <p class="text-lead">
        Sequencing mutations...
    </p>
    <div id="seq-spinner">
        <img src="images/slides/sequencer.gif" alt="Sequencer">
    </div>
    </div>


    <div id="step2" >
    <p class="text-lead">
        Mutations ready
    </p>
        <div style="display: inline flex;">
            <img src="images/slides/computer.png" alt="computer">
            <div>
                <br><br>
                <button  class="results-button" onclick="show_computer()">Find drivers and <br> targeted therapy</button>
            </div>
        </div>
    </div>

    <div id="step3">
    <p class="text-lead">
        Performing analysis...
    </p>
    <div id="seq-spinner" >
            <img src="images/slides/computer.gif" alt="drivers analysis">
        <div >
            <img src="images/slides/machine.gif" alt="drivers analysis" style="height: 110px;">
            <div>
                <img src="images/slides/logos.svg" alt="drivers analysis" style="height: 110px;" >
            </div>
        </div>
    </div>
    </div>

    <div id="step4">
        <button class="results-button" onclick="showResults()">Show results</button>
    </div>
</div>


<div id="res">
    <div class="card-risk-factors" style="margin: 4% auto auto auto;">

        <h3> The characteristics of your sample:</h3>

        {{  result_card(attributes.get('ttype').get('type') + '2.svg', attributes.get('ttype').get('name'))}}

        {{  result_card(attributes.get('ttype').get('type') + '/riskFactor1_' + attributes.get('riskFactor1').get('type') + '.svg',
                        attributes.get('riskFactor1').get('name'),
                        attributes.get('riskFactor1').get('description'))  }}
        {{  result_card(attributes.get('ttype').get('type') + '/riskFactor2_' + attributes.get('riskFactor2').get('type') + '.svg',
                        attributes.get('riskFactor2').get('name'),
                        attributes.get('riskFactor2').get('description'))  }}
        {{  result_card(attributes.get('ttype').get('type') + '/riskFactor3_' + attributes.get('riskFactor3').get('type') + '.svg',
                        attributes.get('riskFactor3').get('name'),
                        attributes.get('riskFactor3').get('description'))  }}

    </div>
<br>
<br>
<br>
    <img src="images/slides/card_explanation.png" style=" height: 500px;margin: auto;">


<br>
<h2>
    The mutations observed in your sample:<br>
</h2>
<br>
<div>
    <a class="download_results" onclick="downloadPDF({{ mutations.values()|list }},{{ attributes.get('ttype').get('name') }})">
        Download results as PDF
    </a>
    </div>
<br>
<div class="grid" id="results-grid">
    {% for mut in mutations.values() %}
        {{ mutation_card(mut,loop.index) }}
    {% endfor %}
</div>


</div>
{% endblock %}


{% block script %}
{{ super() }}
    <script src="./js/results.js?v=1"></script>
{% endblock %}
